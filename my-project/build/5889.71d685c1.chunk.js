"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[5889],{65889:(k,M,s)=>{s.r(M),s.d(M,{default:()=>p});var t=s(53657),c=s(96125),A=s(2669),R=s(50810),O=s(91845),P=s(37367),m=s(45486),W=s(70139),B=s(7139),I=s(55613),U=s(99283),K=s(6620),g=s(29776),j=s(14752),u=s(10434),x=s(23787),_=s(59013),h=s(82154),a=s(35575),S=s(78331),N=s(20590),z=s(22507),w=s(8596),q=s(50973),ss=s(80107),ts=s(18239),is=s(59891),as=s(56771),es=s(88360),ns=s(85392);const C=({sort:n="",pageSize:d=10,onChange:e})=>{const{formatMessage:o}=(0,h.Z)();return(0,t.jsx)(A.x,{background:"neutral0",hasRadius:!0,shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,t.jsxs)(R.r,{gap:4,children:[(0,t.jsx)(O.P,{s:12,col:6,children:(0,t.jsx)(P.P,{label:o({id:(0,a.g)("config.entries.title"),defaultMessage:"Entries per page"}),hint:o({id:(0,a.g)("config.entries.note"),defaultMessage:"Number of assets displayed by default in the Media Library"}),onChange:i=>e({target:{name:"pageSize",value:i}}),name:"pageSize",value:d,children:a.C.map(i=>(0,t.jsx)(m.W,{value:i,children:i},i))})}),(0,t.jsx)(O.P,{s:12,col:6,children:(0,t.jsx)(P.P,{label:o({id:(0,a.g)("config.sort.title"),defaultMessage:"Default sort order"}),hint:o({id:(0,a.g)("config.note"),defaultMessage:"Note: You can override this value in the media library."}),onChange:i=>e({target:{name:"sort",value:i}}),name:"sort",value:n,"test-sort":n,"data-testid":"sort-select",children:a.D.map(i=>(0,t.jsx)(m.W,{"data-testid":`sort-option-${i.value}`,value:i.value,children:o({id:(0,a.g)(i.key),defaultMessage:`${i.value}`})},i.key))})})]})})};C.propTypes={sort:_.string.isRequired,pageSize:_.number.isRequired,onChange:_.func.isRequired};const f=`${a.p}/ON_CHANGE`,v=`${a.p}/SET_LOADED`,Z=({name:n,value:d})=>({type:f,keys:n,value:d}),$=()=>({type:v}),r={initialData:{},modifiedData:{}},y=n=>({...r,initialData:n,modifiedData:n}),b=(n=r,d)=>(0,S.ZP)(n,e=>{switch(d.type){case f:{z(e,["modifiedData",...d.keys.split(".")],d.value);break}case v:{const o=y(N(e,["modifiedData"],{}));e.initialData=o.initialData,e.modifiedData=o.modifiedData;break}default:return e}}),p=({config:n})=>{const{trackUsage:d}=(0,g.useTracking)(),{formatMessage:e}=(0,h.Z)(),o=(0,g.useNotification)(),{mutateConfig:i}=(0,a.z)(),{isLoading:T}=i,[F,G]=(0,c.useState)(!1),D=()=>G(E=>!E),[H,L]=(0,c.useReducer)(b,r,()=>y(n)),{initialData:V,modifiedData:l}=H,Y=E=>{E.preventDefault(),D()},J=async()=>{d("willEditMediaLibraryConfig"),await i.mutateAsync(l),D(),L($()),o({type:"success",message:{id:"notification.form.success.fields",defaultMessage:"Changes saved"}})},Q=({target:{name:E,value:X}})=>{L(Z({name:E,value:X}))};return(0,g.useFocusWhenNavigate)(),(0,t.jsx)(W.A,{children:(0,t.jsx)(B.o,{"aria-busy":T,children:(0,t.jsxs)("form",{onSubmit:Y,children:[(0,t.jsx)(I.T,{navigationAction:(0,t.jsx)(g.Link,{startIcon:(0,t.jsx)(j.Z,{}),to:`/plugins/${a.p}`,id:"go-back",children:e({id:(0,a.g)("config.back"),defaultMessage:"Back"})}),primaryAction:(0,t.jsx)(U.z,{size:"S",startIcon:(0,t.jsx)(u.Z,{}),disabled:x(l,V),type:"submit",children:e({id:"global.save",defaultMessage:"Save"})}),subtitle:e({id:(0,a.g)("config.subtitle"),defaultMessage:"Define the view settings of the media library."}),title:e({id:(0,a.g)("config.title"),defaultMessage:"Configure the view - Media Library"})}),(0,t.jsx)(K.D,{children:(0,t.jsx)(C,{"data-testid":"settings",pageSize:l.pageSize||"",sort:l.sort||"",onChange:Q})}),(0,t.jsx)(g.ConfirmDialog,{bodyText:{id:(0,a.g)("config.popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:(0,t.jsx)(u.Z,{}),isConfirmButtonLoading:T,isOpen:F,onToggleDialog:D,onConfirm:J,variantRightButton:"success-light"})]})})})};p.propTypes={config:_.shape({pageSize:_.number,sort:_.string}).isRequired}}}]);
