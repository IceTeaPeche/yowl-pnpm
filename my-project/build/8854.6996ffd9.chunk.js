"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[8854],{70139:(U,u,s)=>{s.d(u,{A:()=>O});var e=s(53657),_=s(87426),d=s(2669);const c=(0,_.default)(d.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:a})=>a?"auto 1fr":"1fr"};
`,P=(0,_.default)(d.x)`
  overflow-x: hidden;
`,O=({sideNav:a,children:m})=>(0,e.jsxs)(c,{hasSideNav:Boolean(a),children:[a,(0,e.jsx)(P,{paddingBottom:10,children:m})]})},18854:(U,u,s)=>{s.r(u),s.d(u,{default:()=>V});var e=s(53657),_=s(96125),d=s(70139),c=s(6620),P=s(2669),O=s(7139),a=s(55613),m=s(87710),T=s(15227),v=s(41427),D=s(35960),E=s(60590),p=s(18946),f=s(93134),x=s(9991),B=s(46667),r=s(29370),M=s(65250),h=s(13172),L=s(63922),A=s(3404),I=s(82154),o=s(87426),g=s(91086),l=s(78594),q=s(80107);const V=()=>{(0,r.go)();const{formatMessage:n}=(0,I.Z)(),{data:i,isLoading:y,isError:H,remove:Q,regenerate:G}=(0,l.u)(),[C,R]=(0,_.useState)(!1),[N,$]=(0,_.useState)(!1),[Y,z]=(0,_.useState)(),{allowedActions:j}=(0,r.ss)(g.P),F=4,J=(i?.docVersions?.length||0)+1,X=t=>{G.mutate({version:t,prefix:i?.prefix})},w=()=>{R(!C)},b=async()=>{$(!0),await Q.mutateAsync({prefix:i?.prefix,version:Y}),R(!C),$(!1)},k=t=>{z(t),R(!C)},S=n({id:(0,l.g)("plugin.name"),defaultMessage:"Documentation"});return H?(0,e.jsx)(d.A,{children:(0,e.jsx)(c.D,{children:(0,e.jsx)(P.x,{paddingTop:8,children:(0,e.jsx)(r.Hn,{})})})}):(0,e.jsxs)(d.A,{children:[(0,e.jsx)(A.q,{title:S}),(0,e.jsxs)(O.o,{"aria-busy":y,children:[(0,e.jsx)(a.T,{title:S,subtitle:n({id:(0,l.g)("pages.PluginPage.header.description"),defaultMessage:"Configure the documentation plugin"}),primaryAction:(0,e.jsx)(Z,{disabled:!j.canOpen||!i?.currentVersion||!i?.prefix,href:W(`${i?.prefix}/v${i?.currentVersion}`),startIcon:(0,e.jsx)(M.Z,{}),children:n({id:(0,l.g)("pages.PluginPage.Button.open"),defaultMessage:"Open Documentation"})})}),(0,e.jsxs)(c.D,{children:[y&&(0,e.jsx)(r.dO,{children:"Plugin is loading"}),i?.docVersions.length?(0,e.jsxs)(m.i,{colCount:F,rowCount:J,children:[(0,e.jsx)(T.h,{children:(0,e.jsxs)(v.Tr,{children:[(0,e.jsx)(D.Th,{children:(0,e.jsx)(E.Z,{variant:"sigma",textColor:"neutral600",children:n({id:(0,l.g)("pages.PluginPage.table.version"),defaultMessage:"Version"})})}),(0,e.jsx)(D.Th,{children:(0,e.jsx)(E.Z,{variant:"sigma",textColor:"neutral600",children:n({id:(0,l.g)("pages.PluginPage.table.generated"),defaultMessage:"Last Generated"})})})]})}),(0,e.jsx)(p.p,{children:i.docVersions.sort((t,K)=>t.generatedDate<K.generatedDate?1:-1).map(t=>(0,e.jsxs)(v.Tr,{children:[(0,e.jsx)(D.Td,{width:"50%",children:(0,e.jsx)(E.Z,{children:t.version})}),(0,e.jsx)(D.Td,{width:"50%",children:(0,e.jsx)(E.Z,{children:t.generatedDate})}),(0,e.jsx)(D.Td,{children:(0,e.jsxs)(f.k,{justifyContent:"end",onClick:K=>K.stopPropagation(),children:[(0,e.jsx)(x.h,{forwardedAs:"a",disabled:!j.canOpen,href:W(`${i.prefix}/v${t.version}`),noBorder:!0,icon:(0,e.jsx)(M.Z,{}),target:"_blank",rel:"noopener noreferrer",label:n({id:(0,l.g)("pages.PluginPage.table.icon.show"),defaultMessage:"Open {target}"},{target:`${t.version}`})}),j.canRegenerate?(0,e.jsx)(x.h,{onClick:()=>X(t.version),noBorder:!0,icon:(0,e.jsx)(h.Z,{}),label:n({id:(0,l.g)("pages.PluginPage.table.icon.regenerate"),defaultMessage:"Regenerate {target}"},{target:`${t.version}`})}):null,j.canUpdate&&t.version!==i.currentVersion?(0,e.jsx)(x.h,{onClick:()=>k(t.version),noBorder:!0,icon:(0,e.jsx)(L.Z,{}),label:n({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${t.version}`})}):null]})})]},t.version))})]}):(0,e.jsx)(r.x7,{})]}),(0,e.jsx)(r.QH,{isConfirmButtonLoading:N,onConfirm:b,onToggleDialog:w,isOpen:C})]})]})},Z=(0,o.default)(B.Q)`
  text-decoration: none;
`,W=n=>n.startsWith("http")?n:n.startsWith("/")?`${window.strapi.backendURL}${n}`:`${window.strapi.backendURL}/${n}`},78594:(U,u,s)=>{s.d(u,{g:()=>P,u:()=>O});var e=s(96125),_=s(29370),d=s(80107),c=s(91086);const P=a=>`${c.p}.${a}`,O=()=>{const a=(0,_.lm)(),{del:m,post:T,put:v,get:D}=(0,_.kY)(),{formatAPIError:E}=(0,_.So)(),{isLoading:p,isError:f,data:x,refetch:B,error:r}=(0,d.useQuery)(["get-documentation",c.p],async()=>{const{data:o}=await D(`/${c.p}/getInfos`);return o});(0,e.useEffect)(()=>{f&&r&&a({type:"warning",message:r?E(r):{id:"notification.error"}})},[f,r,a,E]);const M=o=>{a({type:"warning",message:E(o)})},h=(o,g,l)=>{B(),a({type:o,message:{id:P(g),defaultMessage:l}})},L=(0,d.useMutation)(({prefix:o,version:g})=>m(`${o}/deleteDoc/${g}`),{onSuccess:()=>h("info","notification.delete.success","Successfully deleted documentation"),onError:M}),A=(0,d.useMutation)(({prefix:o,body:g})=>v(`${o}/updateSettings`,g),{onSuccess:()=>h("success","notification.update.success","Successfully updated settings"),onError:M}),I=(0,d.useMutation)(({prefix:o,version:g})=>T(`${o}/regenerateDoc`,{version:g}),{onSuccess:()=>h("info","notification.generate.success","Successfully generated documentation"),onError:M});return{data:x,isLoading:p,isError:f,remove:L,submit:A,regenerate:I}}}}]);
