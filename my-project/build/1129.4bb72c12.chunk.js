"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[1129],{93085:(u,D,t)=>{t.d(D,{D:()=>f});var s=t(53657),e=t(2669),_=t(28703);function M(g,d,E){if(!g||!d||!E)return{display:"none"};const{x:O,y:n}=E;return{transform:`translate(${O}px, ${n}px)`}}const f=({renderItem:g})=>{const{itemType:d,isDragging:E,item:O,initialOffset:n,currentOffset:c,mouseOffset:l}=(0,_.useDragLayer)(i=>({item:i.getItem(),itemType:i.getItemType(),initialOffset:i.getInitialSourceClientOffset(),currentOffset:i.getSourceClientOffset(),isDragging:i.isDragging(),mouseOffset:i.getClientOffset()}));return E?(0,s.jsx)(e.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%",children:(0,s.jsx)(e.x,{style:M(n,c,l),children:g({type:d,item:O})})}):null}},1136:(u,D,t)=>{t.d(D,{B:()=>W,D:()=>j,H:()=>w,R:()=>B});var s=t(53657),e=t(93134),_=t(60590),M=t(70139),f=t(7139),g=t(6620),d=t(55613),E=t(29370),O=t(26104),n=t(14752),c=t(82154),l=t(93085),i=t(15155),P=t(59013),a=t(87426);const y=(0,a.default)(e.k)`
  svg path {
    fill: ${({theme:m})=>m.colors.neutral600};
  }
`;function h({name:m}){return(0,s.jsxs)(e.k,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,E.Q1)(300),children:[(0,s.jsx)(y,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6,children:(0,s.jsx)(O.Z,{width:`${8/16}rem`})}),(0,s.jsx)(_.Z,{fontWeight:"bold",children:m})]})}h.propTypes={name:P.string.isRequired};function R({type:m,item:v}){switch(m){case i.D.STAGE:return(0,s.jsx)(h,{...v});default:return null}}function j(){return(0,s.jsx)(l.D,{renderItem:R})}function B({children:m}){return(0,s.jsx)(M.A,{children:(0,s.jsx)(f.o,{tabIndex:-1,children:(0,s.jsx)(g.D,{children:m})})})}function W({href:m}){const{formatMessage:v}=(0,c.Z)();return(0,s.jsx)(E.rU,{startIcon:(0,s.jsx)(n.Z,{}),to:m,children:v({id:"global.back",defaultMessage:"Back"})})}function w({title:m,subtitle:v,navigationAction:p,primaryAction:x}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E.SL,{name:m}),(0,s.jsx)(d.T,{navigationAction:p,primaryAction:x,title:m,subtitle:v})]})}},1129:(u,D,t)=>{t.r(D),t.d(D,{default:()=>J});var s=t(53657),e=t(29370),_=t(2108),M=t(4771),f=t(96125),g=t(93134),d=t(9091),E=t(87710),O=t(16100),n=t(15227),c=t(41427),l=t(35960),i=t(60590),P=t(6289),a=t(18946),y=t(9991),h=t(92639),R=t(60773),j=t(63922),B=t(82154),W=t(80107),w=t(33541),m=t(87426),v=t(17448),p=t(74171),x=t(1136),U=t(60635),T=t(15155),z=t(76504),Dt=t(36336),gt=t(70662),Mt=t(43628),ft=t(33099),Ot=t(25291),mt=t(70464),Pt=t(1108),ut=t(83937),vt=t(3404),Ct=t(18239),ht=t(18514),Tt=t(59891),Lt=t(92898),yt=t(96435),xt=t(50973),It=t(20590),At=t(22507),Rt=t(7453),jt=t(93085);const V=(0,m.default)(e.rU)`
  align-items: center;
  height: ${(0,e.Q1)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:o})=>`${o.spaces[2]}}`};
  width: ${(0,e.Q1)(32)};

  svg {
    height: ${(0,e.Q1)(12)};
    width: ${(0,e.Q1)(12)};

    path {
      fill: ${({theme:o})=>o.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:o})=>o.colors.neutral800};
      }
    }
  }
`;function G(){const{formatMessage:o}=(0,B.Z)(),{push:Z}=(0,w.k6)(),{collectionTypes:X,singleTypes:b,isLoading:q}=(0,v.u)(),{meta:L,workflows:k,isLoading:K,refetch:tt}=(0,z.u)(),[Q,S]=f.useState(null),[st,I]=f.useState(!1),{del:et}=(0,e.kY)(),{formatAPIError:nt}=(0,e.So)(),F=(0,e.lm)(),{getFeature:at,isLoading:N}=(0,p.u)(),{trackUsage:H}=(0,e.rS)(),ot=(0,_.v9)(M.s),{allowedActions:{canCreate:Y,canDelete:it}}=(0,e.ss)(ot.settings["review-workflows"]),C=at("review-workflows"),{mutateAsync:rt,isLoading:_t}=(0,W.useMutation)(async({workflowId:r,stages:A})=>{const{data:{data:$}}=await et(`/admin/review-workflows/workflows/${r}`,{data:A});return $},{onSuccess(){F({type:"success",message:{id:"notification.success.deleted",defaultMessage:"Deleted"}})}}),lt=r=>[...X,...b].find($=>$.uid===r).info.displayName,dt=r=>{S(r)},Et=()=>{S(null)},ct=async()=>{try{const r=await rt({workflowId:Q});return await tt(),S(null),r}catch(r){return F({type:"warning",message:nt(r)}),null}};return f.useEffect(()=>{!K&&!N&&C?.[T.C]&&L?.workflowCount>parseInt(C[T.C],10)&&I(!0)},[N,K,C,L?.workflowCount,L.workflowsTotal]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.H,{primaryAction:Y&&(0,s.jsx)(e.Qj,{startIcon:(0,s.jsx)(h.Z,{}),size:"S",to:"/settings/review-workflows/create",onClick:r=>{C?.[T.C]&&L?.workflowCount>=parseInt(C[T.C],10)?(r.preventDefault(),I(!0)):H("willCreateWorkflow")},children:o({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})}),subtitle:o({id:"Settings.review-workflows.list.page.subtitle",defaultMessage:"Manage your content review process"}),title:o({id:"Settings.review-workflows.list.page.title",defaultMessage:"Review Workflows"})}),(0,s.jsxs)(x.R,{children:[K||q?(0,s.jsx)(g.k,{justifyContent:"center",children:(0,s.jsx)(d.a,{children:o({id:"Settings.review-workflows.page.list.isLoading",defaultMessage:"Workflows are loading"})})}):(0,s.jsxs)(E.i,{colCount:3,footer:Y&&(0,s.jsx)(O.c,{icon:(0,s.jsx)(h.Z,{}),onClick:()=>{C?.[T.C]&&L?.workflowCount>=parseInt(C[T.C],10)?I(!0):(Z("/settings/review-workflows/create"),H("willCreateWorkflow"))},children:o({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})}),rowCount:1,children:[(0,s.jsx)(n.h,{children:(0,s.jsxs)(c.Tr,{children:[(0,s.jsx)(l.Th,{children:(0,s.jsx)(i.Z,{variant:"sigma",children:o({id:"Settings.review-workflows.list.page.list.column.name.title",defaultMessage:"Name"})})}),(0,s.jsx)(l.Th,{children:(0,s.jsx)(i.Z,{variant:"sigma",children:o({id:"Settings.review-workflows.list.page.list.column.stages.title",defaultMessage:"Stages"})})}),(0,s.jsx)(l.Th,{children:(0,s.jsx)(i.Z,{variant:"sigma",children:o({id:"Settings.review-workflows.list.page.list.column.contentTypes.title",defaultMessage:"Content Types"})})}),(0,s.jsx)(l.Th,{children:(0,s.jsx)(P.T,{children:o({id:"Settings.review-workflows.list.page.list.column.actions.title",defaultMessage:"Actions"})})})]})}),(0,s.jsx)(a.p,{children:k.map(r=>(0,f.createElement)(c.Tr,{...(0,e.X7)({fn(A){A.target.nodeName!=="BUTTON"&&Z(`/settings/review-workflows/${r.id}`)}}),key:`workflow-${r.id}`},(0,s.jsx)(l.Td,{width:(0,e.Q1)(250),children:(0,s.jsx)(i.Z,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0,children:r.name})}),(0,s.jsx)(l.Td,{children:(0,s.jsx)(i.Z,{textColor:"neutral800",children:r.stages.length})}),(0,s.jsx)(l.Td,{children:(0,s.jsx)(i.Z,{textColor:"neutral800",children:(r?.contentTypes??[]).map(lt).join(", ")})}),(0,s.jsx)(l.Td,{children:(0,s.jsxs)(g.k,{alignItems:"center",justifyContent:"end",children:[(0,s.jsx)(V,{to:`/settings/review-workflows/${r.id}`,"aria-label":o({id:"Settings.review-workflows.list.page.list.column.actions.edit.label",defaultMessage:"Edit {name}"},{name:r.name}),children:(0,s.jsx)(R.Z,{})}),k.length>1&&it&&(0,s.jsx)(y.h,{"aria-label":o({id:"Settings.review-workflows.list.page.list.column.actions.delete.label",defaultMessage:"Delete {name}"},{name:"Default workflow"}),icon:(0,s.jsx)(j.Z,{}),noBorder:!0,onClick:()=>{dt(r.id)}})]})})))})]}),(0,s.jsx)(e.QH,{bodyText:{id:"Settings.review-workflows.list.page.delete.confirm.body",defaultMessage:"If you remove this worfklow, all stage-related information will be removed for this content-type. Are you sure you want to remove it?"},isConfirmButtonLoading:_t,isOpen:!!Q,onToggleDialog:Et,onConfirm:ct}),(0,s.jsxs)(U.L,{isOpen:st,onClose:()=>I(!1),children:[(0,s.jsx)(U.T,{children:o({id:"Settings.review-workflows.list.page.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})}),(0,s.jsx)(U.B,{children:o({id:"Settings.review-workflows.list.page.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."})})]})]})]})}function J(){const o=(0,_.v9)(M.s);return(0,s.jsx)(e.O4,{permissions:o.settings["review-workflows"].main,children:(0,s.jsx)(G,{})})}},17448:(u,D,t)=>{t.d(D,{u:()=>f});var s=t(96125),e=t(29370),_=t(34823),M=t(80107);function f(){const{get:g}=(0,e.kY)(),{formatAPIError:d}=(0,e.So)(),E=(0,e.lm)(),O=(0,M.useQueries)([{queryKey:["content-manager","components"],async queryFn(){const{data:{data:a}}=await g("/content-manager/components");return a},onError(a){a instanceof _.d7&&E({type:"warning",message:d(a)})}},{queryKey:["content-manager","content-types"],async queryFn(){const{data:{data:a}}=await g("/content-manager/content-types");return a},onError(a){a instanceof _.d7&&E({type:"warning",message:d(a)})}}]),[n,c]=O,l=n.isLoading||c.isLoading,i=s.useMemo(()=>(c?.data??[]).filter(a=>a.kind==="collectionType"&&a.isDisplayed),[c?.data]),P=s.useMemo(()=>(c?.data??[]).filter(a=>a.kind!=="collectionType"&&a.isDisplayed),[c?.data]);return{isLoading:l,components:s.useMemo(()=>n?.data??[],[n?.data]),collectionTypes:i,singleTypes:P}}},76504:(u,D,t)=>{t.d(D,{u:()=>M});var s=t(96125),e=t(29370),_=t(80107);function M(f={}){const{get:g}=(0,e.kY)(),{id:d="",...E}=f,O={populate:"stages"},{data:n,isLoading:c,status:l,refetch:i}=(0,_.useQuery)(["review-workflows","workflows",d],async()=>(await g(`/admin/review-workflows/workflows/${d}`,{params:{...O,...E}})).data),P=s.useMemo(()=>d&&n?.data?[n.data]:Array.isArray(n?.data)?n.data:[],[n?.data,d]);return{meta:s.useMemo(()=>n?.meta??{},[n?.meta]),workflows:P,isLoading:c,status:l,refetch:i}}},16100:(u,D,t)=>{t.d(D,{c:()=>O});var s=t(53657),e=t(87426),_=t(2669),M=t(58218),f=t(93134),g=t(60590);const d=(0,e.default)(_.x)`
  height: ${24/16}rem;
  width: ${24/16}rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:n})=>n.colors.primary600};
  }
`,E=(0,e.default)(_.x)`
  border-radius: 0 0 ${({theme:n})=>n.borderRadius} ${({theme:n})=>n.borderRadius};
  display: block;
  width: 100%;
  border: none;
`,O=({children:n,icon:c,...l})=>(0,s.jsxs)("div",{children:[(0,s.jsx)(M.i,{}),(0,s.jsx)(E,{as:"button",background:"primary100",padding:5,...l,children:(0,s.jsxs)(f.k,{children:[(0,s.jsx)(d,{"aria-hidden":!0,background:"primary200",children:c}),(0,s.jsx)(_.x,{paddingLeft:3,children:(0,s.jsx)(g.Z,{variant:"pi",fontWeight:"bold",textColor:"primary600",children:n})})]})})]})},14752:(u,D,t)=>{t.d(D,{Z:()=>_});var s=t(53657);const e=M=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...M,children:(0,s.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),_=e},34823:(u,D,t)=>{t.d(D,{d7:()=>_});var s=t(69054);const{Axios:e,AxiosError:_,CanceledError:M,isCancel:f,CancelToken:g,VERSION:d,all:E,Cancel:O,isAxiosError:n,spread:c,toFormData:l,AxiosHeaders:i,HttpStatusCode:P,formToJSON:a,getAdapter:y,mergeConfig:h}=s.default}}]);
